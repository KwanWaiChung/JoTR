from copy import deepcopy

REF_USR_DA = {
    "alarm": ["addalarm", "getalarms", "new_alarm_name", "new_alarm_time"],
    "messaging": ["addr", "contact_name", "sharelocation"],
    "payment": [
        "amount",
        "makepayment",
        "payment_method",
        "private_visibility",
        "receiver",
        "requestpayment",
    ],
    "trains": [
        "class",
        "date_of_journey",
        "depart",
        "dest",
        "findtrains",
        "from",
        "gettraintickets",
        "people",
        "to",
        "trip_protection",
    ],
    "bank": [
        "amount",
        "checkbalance",
        "name",
        "recipient_name",
        "transfer_amount",
        "transfer_time",
        "transfermoney",
        "type",
    ],
    "bus": [
        "additional_luggage",
        "buybusticket",
        "day",
        "depart",
        "dest",
        "fee",
        "findbus",
        "from_city",
        "group_size",
        "num_passengers",
        "price",
        "time",
        "to_city",
        "transfers",
        "travelers",
        "type",
    ],
    "calendar": [
        "addevent",
        "addr",
        "day",
        "getavailabletime",
        "getevents",
        "name",
        "time",
    ],
    "event": [
        "addr",
        "buyeventtickets",
        "city",
        "city_of_event",
        "day",
        "findevents",
        "geteventdates",
        "name",
        "number_of_tickets",
        "people",
        "price_per_ticket",
        "subtype",
        "time",
        "type",
    ],
    "flight": [
        "airlines",
        "arrives_next_day",
        "day",
        "depart",
        "dest",
        "destination_airport_name",
        "flight_class",
        "is_redeye",
        "number_checked_bags",
        "number_of_tickets",
        "number_stops",
        "origin_airport_name",
        "passengers",
        "price",
        "refundable",
        "reserveonewayflight",
        "reserveroundtripflights",
        "searchonewayflight",
        "searchroundtripflights",
        "seating_class",
        "time",
    ],
    "home": [
        "addr",
        "area",
        "day",
        "findapartment",
        "findhomebyarea",
        "furnished",
        "has_garage",
        "in_unit_laundry",
        "intent",
        "name",
        "number_of_baths",
        "number_of_beds",
        "pets_allowed",
        "phone",
        "price",
        "schedulevisit",
    ],
    "hotel": [
        "addr",
        "bookhouse",
        "day",
        "dest",
        "has_laundry_service",
        "internet",
        "name",
        "number_of_rooms",
        "people",
        "pets_welcome",
        "phone",
        "price",
        "reservehotel",
        "searchhotel",
        "searchhouse",
        "smoking_allowed",
        "stars",
        "stay",
        "stay_length",
    ],
    "media": [
        "actors",
        "directed_by",
        "director",
        "findmovies",
        "name",
        "playmovie",
        "price",
        "rentmovie",
        "starring",
        "subtitle_language",
        "subtitles",
        "title",
        "type",
    ],
    "movie": [
        "addr",
        "buymovietickets",
        "cast",
        "day",
        "directed_by",
        "director",
        "findmovies",
        "gettimesformovie",
        "name",
        "number_of_tickets",
        "price",
        "starring",
        "time",
        "type",
    ],
    "music": [
        "album",
        "artist",
        "device",
        "lookupmusic",
        "lookupsong",
        "name",
        "playback_device",
        "playmedia",
        "playsong",
        "type",
        "year",
    ],
    "rentalcar": [
        "add_insurance",
        "car",
        "city",
        "day",
        "depart",
        "end_date",
        "getcarsavailable",
        "price",
        "price_per_day",
        "reservecar",
        "start_date",
        "time",
        "type",
    ],
    "restaurant": [
        "addr",
        "city",
        "day",
        "findrestaurants",
        "food",
        "has_live_music",
        "has_seating_outdoors",
        "has_vegetarian_options",
        "name",
        "party_size",
        "people",
        "phone",
        "price",
        "reserverestaurant",
        "serves_alcohol",
        "stars",
        "time",
        "type",
    ],
    "ridesharing": [
        "approximate_ride_duration",
        "dest",
        "fee",
        "getride",
        "number_of_riders",
        "people",
        "shared_ride",
        "time",
        "type",
    ],
    "service": [
        "addr",
        "bookappointment",
        "city",
        "day",
        "findprovider",
        "is_unisex",
        "name",
        "offers_cosmetic_services",
        "phone",
        "stars",
        "time",
        "type",
    ],
    "travel": [
        "addr",
        "findattractions",
        "free_entry",
        "good_for_kids",
        "phone",
        "type",
    ],
    "weather": ["city", "day", "getweather", "humidity", "wind"],
}

INIT_BELIEF_STATE = {
    "bus": {
        "dest": "",
        "depart": "",
        "day": "",
        "group_size": "",
        "time": "",
        "type": "",
        "travelers": "",
    },
    "hotel": {
        "pets_welcome": "",
        "number_of_rooms": "",
        "day": "",
        "stay": "",
        "name": "",
        "addr": "",
        "stars": "",
        "dest": "",
        "internet": "",
        "people": "",
        "has_laundry_service": "",
    },
    "flight": {
        "day": "",
        "depart": "",
        "dest": "",
        "airlines": "",
        "passengers": "",
        "refundable": "",
        "seating_class": "",
        "time": "",
    },
    "media": {"type": "", "title": "", "subtitles": "", "directed_by": ""},
    "service": {
        "day": "",
        "time": "",
        "name": "",
        "type": "",
        "city": "",
        "is_unisex": "",
        "offers_cosmetic_services": "",
    },
    "event": {
        "name": "",
        "city": "",
        "number_of_tickets": "",
        "type": "",
        "day": "",
        "people": "",
        "city_of_event": "",
        "subtype": "",
    },
    "travel": {"type": "", "addr": "", "good_for_kids": "", "free_entry": ""},
    "home": {
        "pets_allowed": "",
        "number_of_beds": "",
        "area": "",
        "day": "",
        "number_of_baths": "",
        "furnished": "",
    },
    "calendar": {"day": "", "name": "", "time": "", "addr": ""},
    "weather": {"day": "", "city": ""},
    "rentalcar": {"type": "", "time": "", "day": "", "depart": ""},
    "restaurant": {
        "food": "",
        "city": "",
        "day": "",
        "time": "",
        "serves_alcohol": "",
        "party_size": "",
        "name": "",
        "price": "",
        "has_live_music": "",
    },
    "bank": {"type": "", "amount": "", "name": ""},
    "music": {
        "artist": "",
        "type": "",
        "playback_device": "",
        "album": "",
        "name": "",
        "year": "",
    },
    "movie": {"name": "", "type": "", "addr": "", "day": ""},
    "ridesharing": {
        "shared_ride": "",
        "number_of_riders": "",
        "people": "",
        "type": "",
        "dest": "",
    },
}


NOT_MENTIONED = ["not mentioned", ""]

DONT_CARE = [
    "don't care",
    "dont care",
    "dontcare",
    "do n't care",
]
NUL_VALUE = ["", "none"] + NOT_MENTIONED + DONT_CARE


def init_state():
    state = {
        "user_action": {},
        "belief_state": deepcopy(INIT_BELIEF_STATE),
        "request_state": {},
        "history": [],
    }
    return state
